webpackJsonp([10],{YClU:function(a,t){},sX2L:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("4YfN"),r=e.n(s),i=e("9rMa"),n={data:function(){return{imageUrl:"",disabled:!0,btnText:"",param:null,userInfo:"",form:{avatar:"",name:"",description:"",_id:""}}},mounted:function(){this.getUserInfo()},watch:{},computed:r()({},Object(i.c)(["userinfo"])),methods:{getUserInfo:function(){this.userInfo=JSON.parse(this.userinfo),this.form={avatar:this.userInfo.data.avatar||"",name:this.userInfo.data.name,description:this.userInfo.data.description,_id:this.userInfo.data._id},this.param=new FormData,this.disabled=!0},handleAvatarSuccess:function(a,t){},beforeupload:function(a){if(!(a.size/1024/1024<2))return this.$message.error("上传头像图片大小不能超过 2MB!"),!1;var t=window.URL||window.webkitURL;return this.form.avatar=t.createObjectURL(a),this.param.append("avatar",a,(new Date).getTime()+"image.png"),!1},edit:function(){this.disabled=!this.disabled},editSave:function(){var a=this;this.form.avatar.indexOf("avatar")>-1&&this.form.avatar&&this.param.append("avatar",this.form.avatar),this.param.append("name",this.form.name),this.param.append("description",this.form.description),this.param.append("_id",this.form._id),this.$store.dispatch("editPersInfo",this.param).then(function(t){0==t.code&&(a.$message.success(t.msg),a.getUserInfo())})}}},o={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"personal"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeupload}},[a.form.avatar?e("img",{staticClass:"avatar",attrs:{src:a.form.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a._v(" "),e("el-form",{ref:"form",staticClass:"per-form",attrs:{model:a.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:a.$t("persinfo.name")}},[e("el-input",{staticClass:"input-width",attrs:{disabled:a.disabled,clearable:""},model:{value:a.form.name,callback:function(t){a.$set(a.form,"name",t)},expression:"form.name"}})],1),a._v(" "),e("el-form-item",{attrs:{label:a.$t("persinfo.description")}},[e("el-input",{staticClass:"input-width",attrs:{type:"textarea",rows:2,disabled:a.disabled,placeholder:"请输入内容",clearable:""},model:{value:a.form.description,callback:function(t){a.$set(a.form,"description",t)},expression:"form.description"}})],1),a._v(" "),e("el-form-item",[e("el-button",{ref:"refBtn",on:{click:a.edit}},[a._v(a._s(a.$t("com.edit")))]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.editSave}},[a._v("保存")])],1)],1)],1)},staticRenderFns:[]};var d=e("vSla")(n,o,!1,function(a){e("YClU")},"data-v-4508c344",null);t.default=d.exports}});
//# sourceMappingURL=10.dd2a3dcd2ae6c9d4d7b6.js.map